/* ===============================
   ROOT VARIABLES
================================ */
:root{
  --bg:#121212;
  --calc:#1f1f1f;
  --btn:#2d2d2d;
  --op:#3a7bd5;
  --eq:#00c896;
  --text:#fff;
}

/* Light theme */
.light{
  --bg:#eef1f5;
  --calc:#ffffff;
  --btn:#e8ecf1;
  --op:#ff7b00;
  --eq:#2ecc71;
  --text:#1c1c1c;
}

/* ===============================
   RESET
================================ */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Segoe UI',sans-serif;
}

/* ===============================
   PAGE
================================ */
body{
  background:var(--bg);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

/* ===============================
   CALCULATOR WRAPPER
================================ */
.calculator{
  background:var(--calc);
  width:340px;
  border-radius:22px;
  padding:20px;
  box-shadow:0 15px 40px rgba(0,0,0,.5);
}

/* ===============================
   TOP BAR
================================ */
.top{
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
}

/* Theme toggle */
.toggle{
  cursor:pointer;
}

/* Trash icon */
#clearAllHistory{
  font-size:20px;
  width:36px;
  height:36px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:50%;
  color:#e5e7eb;
  background:#374151;
  cursor:pointer;
  transition:.2s;
}

#clearAllHistory:hover{
  background:#ef4444;
  color:white;
  transform:scale(1.1);
}

/* Shake animation */
#clearAllHistory.shake{
  animation:shake .4s;
}

@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-3px)}
  50%{transform:translateX(3px)}
  75%{transform:translateX(-3px)}
  100%{transform:translateX(0)}
}

/* Light mode */
.light #clearAllHistory{
  background:#e5e7eb;
  color:#111827;
}

.light #clearAllHistory:hover{
  background:#dc2626;
  color:white;
}

/* ===============================
   DISPLAY
================================ */
.display{
  background:#000;
  border-radius:14px;
  padding:15px;
  margin-bottom:15px;
  text-align:right;
}

.light .display{
  background:#f6f7f9;
}

/* Expression */
.history{
  font-size:13px;
  color:#9ca3af;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Result */
.result{
  font-size:34px;
  font-weight:600;
  color:var(--text);
  white-space:nowrap;
  overflow-x:auto;
  padding-bottom:4px;
}

.result::-webkit-scrollbar{
  height:4px;
}

/* ===============================
   BUTTON GRID
================================ */
.buttons{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:12px;
}

/* Base button */
button{
  height:55px;
  border:none;
  border-radius:14px;
  font-size:18px;
  cursor:pointer;
  background:var(--btn);
  color:var(--text);
  transition:.15s;
}

button:hover{filter:brightness(110%);}
button:active{transform:scale(.9);}

/* Special buttons */
.operator{background:var(--op); color:#fff;}
.equal{background:var(--eq); color:#fff;}

.action{
  background:#4b5563;
  color:white;
}

/* DEL */
#del{
  background:#ef4444;
  color:white;
}

/* Zero */
.zero{grid-column:span 2}

/* ===============================
   HISTORY PANEL
================================ */
.history-box{
  margin-top:15px;
  background:#1f2933;
  padding:12px;
  border-radius:16px;
  max-height:180px;
  border:1px solid #374151;
  overflow:auto;
}

/* Header */
.history-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}

.history-header h4{
  font-size:14px;
  color:#e5e7eb;
}

/* Collapse */
.collapse-btn{
  cursor:pointer;
  color:#9ca3af;
}

/* History row */
.history-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:9px 12px;
  margin-bottom:8px;
  border-radius:12px;
  font-size:14px;
  background:#374151;
  color:#f9fafb;
}

/* Text */
.history-item span{
  max-width:200px;
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
}

/* Hover */
.history-item:hover{
  background:#4b5563;
}

/* Row delete */
.history-delete{
  min-width:28px;
  height:28px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:50%;
  color:#f87171;
  cursor:pointer;
  transition:.2s;
}

.history-delete:hover{
  background:#ef4444;
  color:white;
}

/* Collapse mode */
.history-box.collapsed{
  max-height:45px;
  overflow:hidden;
}

/* Light theme */
.light .history-box{
  background:#f3f4f6;
  border:1px solid #e5e7eb;
}

.light .history-header h4{
  color:#111827;
}

.light .history-item{
  background:#e5e7eb;
  color:#111827;
}

.light .history-item:hover{
  background:#d1d5db;
}

.light .history-delete{
  color:#dc2626;
}

.light .history-delete:hover{
  background:#dc2626;
  color:white;
}
